1. **去均值（偏置去除）**
   在计算 `v_shape` 后，代码会用梯度做权重对其做均值去除，这会改变灵敏度幅值。

2. **幅值缩放（robust scaling）**
   函数使用 99 分位与迭代相关目标值 `v_target` 对 `v_shape` 做放大/缩小，以减缓早期演化。

3. **运动域收缩**
   代码通过 `material_mask` 与 `target_ring` 再次收紧狭带。窄带掩膜 `band_mask` 保留。

4. **距离约束项 `v_fid`**
   若 `lambda_fid > 0`，会计算 `v_fid = -lambda_fid*(lsf - lsf_target)` 并与 `v_shape` 累加，用来拉回路径到目标等距层。

5. **曲率正则项 `v_curv`**
   当 `gamma_curv > 0` 时，代码会计算曲率 `kappa` 并形成 `v_curv = -gamma_curv*kappa` 平滑零水平集。

6. **净平移抑制**
   通过参数 `beta` 计算速度场的加权平均并减去，以消除整体平移。



